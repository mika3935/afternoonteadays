<div class="cover-index">
  <div class="container d-flex flex-column align-items-center">
    <div class="row mt-5">
      <h1 class="font-weight-normal">下書き一覧</h1>
    </div>
    <div class="row mt-3 mb-3 align-self-end">
      <%= form_with url: posts_path, method: :get, local: true do |f| %>
        <%= f.text_field :search %>
        <%= f.submit '検索する', name: nil %>
      <% end %>
    </div>
    <div class="row mt-5 w-100 justify-content-center align-items-stretch">
      <% @posts.each do |post| %>
        <div class="col-md-4 col-sm-6 col-12 d-flex align-items-stretch justify-content-center">
          <div class="post-card" style="padding:12px;background:#fff;border:none;box-shadow:0 8px 18px rgba(0,0,0,0.08);border-radius:12px;">
            <%= link_to post_path(post), class: 'post-link' do %>
              <div class="image-wrapper" style="display:flex;align-items:center;justify-content:center;padding:12px;background:linear-gradient(180deg,#ffffff,#fffdf8);border-radius:14px;overflow:hidden;">
                <% if post.image.present? %>
                  <%= attachment_image_tag post, :image, format: 'jpeg', size: '180x180', class: 'post-thumb', style: 'display:block;margin:0 auto;max-width:100%;max-height:100%;object-fit:cover;' %>
                <% else %>
                  <div class="no-image">No Image</div>
                <% end %>
              </div>

              <div class="post-content">
                <p class="caption location"><%= post.location %></p>
                <div class="post-footer">
                  <p class="caption comments"><%= "#{post.comments.count} コメント" %></p>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
    <%= paginate @posts %>
  </div>
</div>