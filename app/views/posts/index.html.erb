<div class="cover-index">
  <div class="container d-flex flex-column align-items-center">

    <!-- タイトル -->
    <div class="row mt-3">
      <h1 class="page-title">投稿一覧</h1>
    </div>

    <!-- 検索フォーム -->
    <div class="row mt-2 mb-3 align-self-end">
      <%= form_with method: :get, local: true do |f| %>
        <%= f.text_field :search, class: "form-control d-inline-block mr-2", placeholder: "場所で検索" %>
        <%= f.submit '検索', class: "btn btn-primary btn-sm" %>
      <% end %>
    </div>

    <!-- 投稿カード一覧 -->
    <div class="row mt-3 w-100 justify-content-center align-items-stretch">
      <% @posts.each do |post| %>
        <div class="col-md-4 col-sm-6 col-12 d-flex align-items-stretch justify-content-center">
          <div class="post-card" style="padding:12px;background:#fff;border:none;box-shadow:0 8px 18px rgba(0,0,0,0.08);border-radius:12px;">
            <%= link_to post_path(post), class: 'post-link' do %>

            <!-- 画像ラッパー -->
            <div class="image-wrapper" style="display:flex;align-items:center;justify-content:center;padding:12px;background:linear-gradient(180deg,#ffffff,#fffdf8);border-radius:14px;overflow:hidden;">
              <% if post.image.present? %>
                <%= attachment_image_tag post, :image, format: 'jpeg', size: "180x180", class: 'post-thumb', style: 'display:block;margin:0 auto;max-width:100%;max-height:100%;object-fit:cover;' %>
              <% else %>
                <div class="no-image"></div>
              <% end %>
            </div>

            <!-- 投稿情報 -->
            <div class="post-content">
              <p class="caption location"><%= post.location %></p>
              <div class="post-footer">
                <p class="caption comments"><%= "#{post.comments.count} コメント" %></p>
              </div>
            </div>

            <% end %>
          </div>
        </div>
      <% end %>
    </div>

    <!-- ページネーション -->
    <div class="mt-3 mb-3">
      <%= paginate @posts %>
    </div>

  </div>
</div>
