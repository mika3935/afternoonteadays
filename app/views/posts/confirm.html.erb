<div class="cover-confirm">
  <div class="container d-flex flex-column align-items-center">

    <div class="row mt-5">
      <h1 class="page-title">投稿内容の確認</h1>
    </div>

    <div class="card p-4 mt-4 shadow-sm" style="max-width: 600px; width: 100%;">

      <h4 class="mb-3"><strong>投稿者：</strong><%= current_user.name %></h4>

      <!-- ✅ create に送るフォーム -->
      <%= form_with model: @post, url: posts_path, local: true do |f| %>

        <!-- 画像表示 -->
        <div class="image-wrapper d-flex justify-content-center align-items-center mb-4"
             style="height:200px; overflow:hidden; border-radius:12px;">
          <% if @post.image.attached? %>
            <%= image_tag @post.image.variant(resize_to_fill: [180, 180]),
                  class: "post-thumb",
                  style: "display:block;margin:0 auto;max-width:100%;max-height:100%;object-fit:cover;" %>
          <% else %>
            <div class="no-image">No Image</div>
          <% end %>
        </div>

        <!-- 場所 -->
        <h5 class="mt-3 mb-2">場所</h5>
        <p class="caption"><%= @post.location %></p>

        <!-- 感想 -->
        <h5 class="mt-3 mb-2">感想</h5>
        <p class="border p-3 rounded bg-light"><%= @post.text %></p>

        <!-- ✅ hidden_field でデータを create に送る -->
        <%= f.hidden_field :location %>
        <%= f.hidden_field :text %>
        <%= f.hidden_field :status %>
        <%= f.hidden_field :image, value: @post.image.signed_id if @post.image.attached? %>

        <!-- ボタン -->
        <div class="mt-4 d-flex justify-content-between">
          <%= button_to "修正する", new_post_path, method: :get, class: "btn btn-info" %>
          <%= f.submit "投稿する", class: "btn btn-success" %>
        </div>

      <% end %>

    </div>

  </div>
</div>
